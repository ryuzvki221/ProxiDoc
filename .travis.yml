language: python
python:
  - "3.8"
before_install:
  - python -m pip install --upgrade pip
# command to install dependencies
install:
  - pip install -r requirements.txt
# command to run tests
script:
  - pytest src/
# Deployment on heroku
deploy:
  provider: heroku
  api_key:
    secure: $HEROKU_API_KEY
  app: $HEROKU_APP_NAME
  run: python src/manage.py migrate
  on:
    branch: master